<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui"
             xmlns:b="urn:import:org.gwtbootstrap3.client.ui"
             xmlns:dash-dset-editors="urn:import:org.dashbuilder.client.widgets.dataset.editor.widgets.editors"
             xmlns:dash-dset-editors-sql="urn:import:org.dashbuilder.client.widgets.dataset.editor.widgets.editors.sql"
             xmlns:dash-dset-editors-csv="urn:import:org.dashbuilder.client.widgets.dataset.editor.widgets.editors.csv"
             xmlns:dash-dset-editors-static="urn:import:org.dashbuilder.client.widgets.dataset.editor.widgets.editors.bean"
             xmlns:dash-dset-editors-el="urn:import:org.dashbuilder.client.widgets.dataset.editor.widgets.editors.elasticsearch"
    >

  <ui:with field="i18n" type="org.dashbuilder.client.widgets.resources.i18n.DataSetEditorConstants"/>

  <ui:style type="org.dashbuilder.client.widgets.dataset.editor.widgets.DataSetEditorView.DataSetEditorViewStyle">
    .mainPanel {
      font-size: 12pt;
      margin: 10px;
      padding-top: 5px;
    }

    .titlePanel {
      vertical-align: middle;
      margin-bottom: 10px;
    }

    .title {
      margin: 0px;
    }

    .editorPanel {
      margin: 15px;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .providerTypeEditor {
      width: 100%;
    }

    .tabPanel {
      margin: 0px;
    }

    .columnsEditor {
      overflow: auto;
      height: 400px;
    }

    .buttonsPanel {
      margin-top: 0px;
    }

    .well {
      background-color: white;
      margin-bottom: 20px;
      min-height: 20px;
      padding: 10px;
    }

    .columnsFilterDisclosurePanel {
      float: left;
      margin-right: 20px;
    }

    .columnsFilterDisclosurePanelHeader {
      width: 15px;
      background-color: ghostwhite;
      position: absolute;
      border-radius: 0px 4px 4px 0px;
      border: 1px solid lavender;
      border-left-width: 0px;
      cursor: pointer;
      margin-top: 44px;
      height: 450px;
      left: 10px;
    }

    .columnsFilterDisclosurePanelHeaderOpen {
      left: 360px;
    }

    .columnsFilterDisclosurePanelButton {
      margin-left: 4px;
      margin-top: 5px;
      filter: alpha(opacity=5);
      opacity: 0.5;
    }

    @external .gwt-DisclosurePanel .content;
    .gwt-DisclosurePanel .content {
      border: 0px;
    }

    .columnsFilterPanel {
      float: left;
      width: 340px;
      overflow: hidden;
      height: 450px;
      margin-top: 10px;
    }

    .specificProviderAttributesPanel {
      height: 100%;
      margin-top: 0px;
    }

    .previewTablePanel {
      margin-left: 15px;
      overflow: hidden;
      height: 500px;
    }

    .previewTable {
      height: 100%;
      overflow: auto;
    }

    .tabInnerPanel {
      width: 95%;
      height: 500px;
      overflow: hidden;
    }

    .advancedTabInnerPanel {
      width: 95%;
      overflow-y: auto;
    }

    .errorPanel {
      margin: 25px;
    }

    .errorRow {
      margin-bottom: 10px;
    }

    .errorLabel {
      font-weight: bold;

    }

    .with100pc {
      width: 100%;
    }
  </ui:style>

  <g:FlowPanel addStyleNames="{style.mainPanel} {style.well} " ui:field="mainPanel">

    <!-- Error panel. -->
    <b:Modal ui:field="errorPanel" title="{i18n.error}" dataBackdrop="STATIC" dataKeyboard="true" fade="true">

      <b:ModalBody>
        <b:Container fluid="true" addStyleNames="{style.errorPanel}">
          <b:Row ui:field="errorMessageRow" addStyleNames="{style.errorRow}">
            <b:Column size="MD_12">
              <g:Label text="{i18n.message}" addStyleNames="{style.errorLabel}"/>
            </b:Column>
            <b:Column size="MD_12">
              <g:HTML ui:field="errorMessage" text=""/>
            </b:Column>
          </b:Row>
          <b:Row ui:field="errorCauseRow" addStyleNames="{style.errorRow}">
            <b:Column size="MD_12">
              <g:Label text="{i18n.cause}" addStyleNames="{style.errorLabel}"/>
            </b:Column>
            <b:Column size="MD_12">
              <g:HTML ui:field="errorCause" text=""/>
            </b:Column>
          </b:Row>
        </b:Container>
      </b:ModalBody>

      <b:ModalFooter>
        <b:Button ui:field="errorPanelButton" icon="CHECK" type="PRIMARY" text="{i18n.ok}"/>
      </b:ModalFooter>

    </b:Modal>

    <!-- Title. -->
    <g:FlowPanel addStyleNames="{style.titlePanel}" ui:field="titlePanel">
      <b:Heading size="H3" text="" ui:field="title" addStyleNames="{style.title}"/>
    </g:FlowPanel>

    <g:FlowPanel ui:field="providerSelectionViewPanel" addStyleNames="{style.editorPanel}">
      <dash-dset-editors:DataSetProviderTypeEditor editMode="true" ui:field="dataSetProviderTypeEditor" addStyleNames="{style.providerTypeEditor}"/>
    </g:FlowPanel>

    <g:FlowPanel ui:field="tabViewPanel">

      <b:TabPanel tabPosition="TOP" ui:field="tabPanel" addStyleNames="{style.tabPanel} {style.editorPanel}">

        <b:NavTabs>
          <!-- Preview & columns & filter. -->
          <b:TabListItem active="true" ui:field="configurationTabItem" text="{i18n.tab_configguration}"/>
          <!-- Preview & columns & filter. -->
          <b:TabListItem ui:field="previewTabItem" text="{i18n.tab_preview}"/>
          <!-- Advanced configuration. -->
          <b:TabListItem ui:field="advancedConfigurationTabItem" text="{i18n.tab_advancedConfiguration}"/>
        </b:NavTabs>
        <b:TabContent>
          <!-- Preview & columns & filter. -->
          <b:TabPane ui:field="configurationTabPane" active="true">
            <g:FlowPanel ui:field="dataConfigurationPanel" addStyleNames="{style.tabInnerPanel} ">

              <g:FlowPanel ui:field="basicAttributesEditionViewPanel" addStyleNames="{style.editorPanel}">
                <dash-dset-editors:DataSetBasicAttributesEditor editMode="true" ui:field="dataSetBasicAttributesEditor"/>
              </g:FlowPanel>

              <g:FlowPanel ui:field="specificProviderAttributesPanel" addStyleNames="{style.editorPanel} {style.specificProviderAttributesPanel} ">

                <g:FlowPanel ui:field="sqlAttributesEditionViewPanel">
                  <dash-dset-editors-sql:SQLDataSetDefAttributesEditor editMode="true" ui:field="sqlDataSetDefAttributesEditor"/>
                </g:FlowPanel>

                <g:FlowPanel ui:field="csvAttributesEditionViewPanel">
                  <dash-dset-editors-csv:CSVDataSetDefAttributesEditor editMode="true" ui:field="csvDataSetDefAttributesEditor"/>
                </g:FlowPanel>

                <g:FlowPanel ui:field="beanAttributesEditionViewPanel">
                  <dash-dset-editors-static:BeanDataSetDefAttributesEditor editMode="true" ui:field="beanDataSetDefAttributesEditor"/>
                </g:FlowPanel>

                <g:FlowPanel ui:field="elAttributesEditionViewPanel">
                  <dash-dset-editors-el:ELDataSetDefAttributesEditor editMode="true" ui:field="elDataSetDefAttributesEditor"/>
                </g:FlowPanel>

              </g:FlowPanel>

            </g:FlowPanel>
          </b:TabPane>

          <!-- Preview & columns & filter. -->
          <b:TabPane ui:field="previewTabPane">
            <g:FlowPanel ui:field="filterColumnsPreviewTablePanel" addStyleNames="{style.tabInnerPanel} ">

              <!-- Columns and filter panel . -->
              <g:FlowPanel addStyleNames="{style.columnsFilterDisclosurePanel} ">
                <g:DisclosurePanel ui:field="filterAndColumnsEditionDisclosurePanel" open="true">
                  <g:customHeader>
                    <g:FlowPanel ui:field="columnsFilterDisclosurePanelHeader" addStyleNames="{style.columnsFilterDisclosurePanelHeader} {style.columnsFilterDisclosurePanelHeaderOpen} ">
                      <b:Icon type="STEP_BACKWARD" ui:field="columnsFilterDisclosurePanelButton" title="{i18n.hideColumnsAndFilter}" addStyleNames="{style.columnsFilterDisclosurePanelButton} "/>
                    </g:FlowPanel>
                  </g:customHeader>
                  <g:FlowPanel ui:field="filterAndColumnsEditionViewPanel" addStyleNames="{style.columnsFilterPanel} ">

                    <b:TabPanel tabPosition="TOP" ui:field="filterAndColumnsTabPanel" addStyleNames="{style.tabPanel} ">

                      <b:NavTabs>
                        <!-- Columns. -->
                        <b:TabListItem title="{i18n.dataColumns}" text="{i18n.dataColumns}" active="true" ui:field="columnsTabItem"/>
                        <b:TabListItem title="{i18n.filter}" text="{i18n.filter}" ui:field="filterTabItem"/>
                      </b:NavTabs>
                      <b:TabContent marginTop="10">
                        <!-- Preview & columns & filter. -->
                        <b:TabPane ui:field="columnsTabPane" active="true">
                          <dash-dset-editors:DataSetColumnsEditor editMode="true" ui:field="columnsEditor" addStyleNames="{style.columnsEditor}"/>
                        </b:TabPane>
                        <b:TabPane ui:field="filterTabPane"/>
                      </b:TabContent>
                    </b:TabPanel>

                  </g:FlowPanel>
                </g:DisclosurePanel>
              </g:FlowPanel>

              <g:FlowPanel ui:field="previewTableEditionViewPanel" addStyleNames="{style.previewTablePanel} ">

                <!-- Preview table . -->
                <dash-dset-editors:DataSetPreviewEditor editMode="true" ui:field="previewTableEditor" addStyleNames="{style.previewTable}"/>

              </g:FlowPanel>

            </g:FlowPanel>
          </b:TabPane>

          <!-- Advanced configuration. -->
          <b:TabPane ui:field="advancedConfigurationTabPane">
            <g:FlowPanel ui:field="advancedAttributesEditionViewPanel" addStyleNames="{style.editorPanel} {style.advancedTabInnerPanel} ">
              <dash-dset-editors:DataSetAdvancedAttributesEditor editMode="true" ui:field="dataSetAdvancedAttributesEditor"/>
            </g:FlowPanel>
          </b:TabPane>
        </b:TabContent>
      </b:TabPanel>

    </g:FlowPanel>

    <g:HorizontalPanel ui:field="buttonsPanel" addStyleNames="{style.buttonsPanel}">

      <b:Popover showDelayMs="500" content="{i18n.back_description}" title="{i18n.back}">
        <b:Button text="{i18n.back}" ui:field="cancelButton"/>
      </b:Popover>

      <!-- Test provider settings button. -->
      <b:Popover placement="RIGHT" ui:field="testPopover" showDelayMs="500" content="{i18n.test_description}" title="{i18n.test}">
        <b:Button text="{i18n.test}" ui:field="testButton" type="PRIMARY"/>
      </b:Popover>

      <b:Popover placement="RIGHT" ui:field="nextPopover" showDelayMs="500" content="{i18n.next_description}" title="{i18n.next}">
        <b:Button text="{i18n.next}" ui:field="nextButton" type="PRIMARY"/>
      </b:Popover>

    </g:HorizontalPanel>

  </g:FlowPanel>

</ui:UiBinder>